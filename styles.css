/* Базовая типографика и цвета */
:root{
    --bg:#f7f7f7; --text:#333; --link:#0066cc;
    --header-grad-a:#1e3c72; --header-grad-b:#2a5298;
    --card-bg:#fff; --shadow:0 2px 6px rgba(0,0,0,.1);
    --muted:#eef2f7; --zebra:#f3f7ff;
}

*{box-sizing:border-box}
body{
    margin:0; font-family:"Segoe UI",Arial,sans-serif; line-height:1.6;
    background:var(--bg); color:var(--text);
}
a{color:var(--link); text-decoration:none}
a:hover{text-decoration:underline}
h1,h2,h3{margin-top:0}
img{max-width:100%; height:auto}

/* Доступность */
.visually-hidden{
    position:absolute!important; width:1px; height:1px; padding:0; margin:-1px;
    overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}

/* Шапка (sticky) */
header.site-header{
    position:sticky; top:0; z-index:50;
    background:linear-gradient(to right,var(--header-grad-a),var(--header-grad-b));
    color:#fff; padding:1rem 2rem; box-shadow:0 2px 12px rgba(0,0,0,.15);
}
.logo-block{display:flex; align-items:center; gap:1rem}
.logo-block img{height:60px}
header h1{font-size:1.8rem; margin:0}
.main-nav ul{
    list-style:none; padding:0; margin:1rem 0 0;
    display:flex; gap:1rem; flex-wrap:wrap
}
.main-nav a{
    color:#fff; font-weight:700; padding:.25rem .5rem; border-radius:6px;
    transition:background-color .15s ease, color .15s ease, box-shadow .15s ease;
    outline:none;
}
.main-nav a.hover,
.main-nav a:hover{
    background:rgba(255,255,255,.14);
    box-shadow:0 0 0 2px rgba(255,255,255,.25) inset;
    text-decoration:none;
}
.main-nav a:focus-visible{
    box-shadow:0 0 0 3px #fff, 0 0 0 6px rgba(255,255,255,.35);
}
.main-nav a.active{
    background:#fff; color:#1e3c72;
    box-shadow:0 0 0 2px #fff inset;
}

/* Контент */
main{
    display:grid; grid-template-columns:2fr 1fr; gap:2rem; padding:2rem;
}
section, article, aside{
    background:var(--card-bg); padding:1rem 1.5rem; border-radius:8px; box-shadow:var(--shadow)
}
article+article{margin-top:1.5rem}
.section-pad{padding:2rem}

/* Теги тем */
.topics-tags{
    display:flex; flex-wrap:wrap; gap:.5rem; list-style:none; padding:0; margin:0
}
.topics-tags li{
    background:var(--muted); border:1px solid #d4dbe6; padding:.35rem .6rem; border-radius:999px
}

/* Галерея */
.gallery-grid{
    display:grid; gap:1rem;
    grid-template-columns:repeat(4, minmax(0,1fr));
}
.gallery-grid figure{margin:0; background:#fff; border-radius:8px; overflow:hidden; box-shadow:var(--shadow)}
.gallery-grid figcaption{padding:.5rem .75rem; font-size:.9rem; color:#555}

/* Лента новостей */
.news-grid{
    display:grid; gap:1rem; grid-template-columns:repeat(3, minmax(0,1fr));
}
.card{display:grid; gap:.5rem; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; background:#fff}
.card a{align-self:end; font-weight:600}

/* Код */
pre{
    background:#272822; color:#f8f8f2; padding:1rem; border-radius:6px; overflow-x:auto
}

/* Форма */
form input, form button, form textarea, form select{
    width:100%; padding:.5rem; margin-top:.5rem; border:1px solid #ccc; border-radius:4px; font-size:1rem
}
form button{background:var(--header-grad-b); color:#fff; border:none; cursor:pointer}
form button:hover{background:var(--header-grad-a)}

/* Адаптивная таблица */
.responsive-table{
    width:100%;
    border:1px solid #e5e7eb;
    border-radius:8px;
    overflow:hidden;

    display:grid;
    grid-template-columns: 2fr repeat(4, minmax(110px, 1fr));
}
.responsive-table caption{
    grid-column: 1 / -1;
    padding:.75rem 1rem;
    font-weight:700;
    text-align:left;
    background:#e9eef8;
}
.responsive-table thead, .responsive-table tbody, .responsive-table tr{display:contents}
.responsive-table th, .responsive-table td{
    padding:.75rem 1rem; border-bottom:1px solid #eef0f3
}
.responsive-table thead th{
    position:sticky; top:0; background:#f0f4ff; z-index:1
}
.responsive-table tbody tr:nth-child(even) td{background:var(--zebra)}
.responsive-table tbody tr:hover td{background:#eef7ff}

/* Подвал */
footer{
    background:#222; color:#ddd; padding:2rem; text-align:center
}
footer a{color:#ddd}
footer nav ul{
    display:flex; justify-content:center; gap:1rem; list-style:none; padding:0; margin:1rem 0 0
}

.footer-banner{
    margin:1rem auto 0; padding:1rem; border-radius:10px;
    background:linear-gradient(90deg,#ffd166,#ef476f); color:#111; font-weight:700; max-width:1200px
}

.perf-info{ margin:1rem 0 0; font-size:.95rem; color:#bbb; }
.perf-info strong{ color:#ffd166; }

/* ===== Лента: форма комментариев, удаление, прелоадер, раскладка ===== */
.page-news{ grid-template-columns: 1fr; }

.comment-form{
    display:grid; grid-template-columns:1fr auto; gap:.75rem; align-items:end; margin-bottom:1rem;
}
.comment-form .full{ grid-column:1 / -1; }
.comment-form textarea{ resize:vertical; }

.delete-btn{
    margin-top:.25rem;
    border:1px solid #f2a3a3;
    background:#ffecec;
    color:#9b1c1c;
    border-radius:6px;
    padding:.35rem .6rem;
    cursor:pointer;
}
.delete-btn:hover{ background:#ffdede; }

.preloader {
    margin: 1rem 0;
    width: 40px; height: 40px;
    border: 4px solid #ccc;
    border-top: 4px solid #2a5298;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin { from{transform:rotate(0)} to{transform:rotate(360deg)} }

/* ====== Медиа-запросы базовые ====== */
@media (max-width:480px){
    main{grid-template-columns:1fr; padding:1rem}
    header h1{font-size:1.3rem}
    .gallery-grid{grid-template-columns:1fr}
    .news-grid{grid-template-columns:1fr}
    .responsive-table{grid-template-columns:1.5fr repeat(2, minmax(90px,1fr));}
    .responsive-table thead th:nth-child(4),
    .responsive-table thead th:nth-child(5),
    .responsive-table tbody td:nth-child(4),
    .responsive-table tbody td:nth-child(5){display:none}
    .footer-banner{display:none}
}
@media (max-width:1024px){
    main{grid-template-columns:1fr}
    .gallery-grid{grid-template-columns:repeat(2, minmax(0,1fr))}
    .news-grid{grid-template-columns:repeat(2, minmax(0,1fr))}
}
@media (min-width:1920px){
    .gallery-grid{grid-template-columns:repeat(5, minmax(0,1fr))}
    .news-grid{grid-template-columns:repeat(4, minmax(0,1fr))}
    .responsive-table{grid-template-columns: 2fr repeat(4, minmax(140px,1fr))}
}
@media (min-width:2560px){
    body{font-size:18px}
    .section-pad{padding:3rem}
    .gallery-grid{grid-template-columns:repeat(6, minmax(0,1fr))}
    .news-grid{grid-template-columns:repeat(5, minmax(0,1fr))}
}
@media (min-aspect-ratio:21/9){
    .gallery-grid{grid-auto-rows:minmax(160px, auto)}
    .news-grid{grid-auto-rows:1fr}
}

/* ===== Айфоны и смартфоны среднего размера (350px – 600px) ===== */
/* Этот блок идёт ПОСЛЕДНИМ, чтобы переопределить общие правила выше */
@media (min-width:350px) and (max-width:600px){
    main{ grid-template-columns:1fr; padding:1rem; }
    header h1{ font-size:1.25rem; }
    .logo-block img{ height:48px; }

    /* На айфонах галерея лучше в 2 колонки, новости — по одной */
    .gallery-grid{ grid-template-columns:repeat(2, 1fr); }
    .news-grid{ grid-template-columns:1fr; }

    /* Таблица — ужимаем, скрываем «тяжёлые» колонки */
    .responsive-table{ grid-template-columns:1.2fr repeat(2, minmax(90px,1fr)); }
    .responsive-table thead th:nth-child(4),
    .responsive-table thead th:nth-child(5),
    .responsive-table tbody td:nth-child(4),
    .responsive-table tbody td:nth-child(5){ display:none; }

    /* Баннер убираем, чтобы не занимал полэкрана */
    .footer-banner{ display:none; }

    /* Форма комментариев — одна колонка */
    .comment-form{ grid-template-columns:1fr; }
}